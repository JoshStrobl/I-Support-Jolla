// @license magnet:?xt=urn:btih:8e4f440f4c65981c5bf93c76d35135ba5064d8b7&dn=apache-2.0.txt Apache-2.0
var isupportjolla;(function(a){(function(a){a.CreateError=function(a,k,c){var b=document.createElement("div");b.setAttribute("data-isupportjolla-error",a);b.textContent=k;"undefined"!==typeof c&&c.appendChild(b);return b}})(a.errors||(a.errors={}))})(isupportjolla||(isupportjolla={}));var twttr;
(function(a){(function(b){b.GetDirection=function(){return document.body.getAttribute("dir")};b.GetLanguage=function(){return document.querySelector("html").getAttribute("lang")};b.PropagateLanguageBar=function(){if("string"==typeof a.Config.Languages&&0!==a.Config.Languages.length)for(var d=document.querySelector('header > div[data-isupportjolla-component="navigation"][data-isupportjolla-type="language"]'),b=a.Config.Languages.split(","),c=document.location.href,e=c.substr(0,c.lastIndexOf("/")-2),
c=document.location.href.substr(c.lastIndexOf("/")),f=0;f<b.length;f++){var h=b[f],g=document.createElement("a");g.href=e+h+c;g.textContent=h;d.appendChild(g)}}})(a.lang||(a.lang={}))})(isupportjolla||(isupportjolla={}));
(function(a){(function(b){b.RequestHandler=function(a,b){var c=b.target;4==c.readyState&&(200==c.status?c=0!==c.responseText.indexOf("{")?c.responseText:JSON.parse(c.responseText):(c={Error:"The server is currently not reachable."},navigator.onLine||(c.Error+=" We have detected you are offline.")),"function"==typeof a&&a(c))};b.Request=function(d,b,c,e){var f=new XMLHttpRequest;f.open(b,d,!0);"function"==typeof e&&(f.onreadystatechange=a.net.RequestHandler.bind(this,e));"object"==typeof c&&(c=JSON.stringify(c));
f.send(c)}})(a.net||(a.net={}))})(isupportjolla||(isupportjolla={}));
(function(a){(function(b){b.Init=function(){a.letters.BackButton=document.querySelector('div[data-isupportjolla-component="back-button"]');a.letters.PublishedLetterContainer=document.querySelector('div[data-isupportjolla-component="letter-container"]');a.letters.PublishedLetter=a.letters.PublishedLetterContainer.querySelector('div[data-isupportjolla-component="published-letter"]');a.letters.PublishedLetterContent=a.letters.PublishedLetterContainer.querySelector('div[data-isupportjolla-component="published-letter-content"]');a.letters.BackButton.addEventListener("click",
a.letters.HideLetter);a.letters.LoadLettersUX()};b.LoadLettersUX=function(){a.net.Request("http://isupportjolla.com/letters-api","POST",{Action:"get",LetterId:"all"},function(d){if("undefined"==typeof d.Error){var b=Object.keys(d);if(0!==b.length){var c=document.createElement("div");c.setAttribute("data-isupportjolla-component","letters-list-items");a.PrimaryContent.querySelector('div[data-isupportjolla-component="letters-list"]').appendChild(c);for(var e=0;e<b.length;e++){var f=b[e],h=d[f],g=a.letters.CreateLetterListItem(h);
c.insertBefore(g,c.firstChild);g.querySelector('div[data-isupportjolla-component="letter-metadata"] > span').addEventListener("click",a.letters.LoadLetter.bind(this,f,h))}}else d.Error="No Letters are currently available."}"string"==typeof d.Error&&(d=a.errors.CreateError("server-unreachable",d.Error),a.PrimaryContent.appendChild(d))})};b.CreateLetterListItem=function(d){var b=document.createElement("div");b.setAttribute("data-isupportjolla-component","letters-list-item");var c=a.letters.CreateLetterMetadata(d),
e=document.createElement("p");e.textContent=decodeURIComponent(d.Description);b.appendChild(c);b.appendChild(e);return b};b.CreateLetterMetadata=function(a){var b=document.createElement("div");b.setAttribute("data-isupportjolla-component","letter-metadata");var c=document.createElement("img");c.setAttribute("src",a.Author.Avatar);b.appendChild(c);c=document.createElement("span");c.textContent=a.Title;b.appendChild(c);c=document.createElement("b");c.textContent=a.Author.Name;b.appendChild(c);c=document.createElement("u");
c.textContent=(new Date(1E3*a.Date)).toUTCString();b.appendChild(c);return b};b.LoadLetter=function(b,k){var c=function(b,c){if("object"!==typeof c){var d=a.letters.CreateLetterMetadata(k);a.letters.PublishedLetter.insertBefore(d,a.letters.PublishedLetterContent);a.letters.PublishedLetterContent.innerHTML=c;a.PrimaryContent.querySelector('div[data-isupportjolla-component="letters-list-items"]').setAttribute("hide","");a.letters.PublishedLetterContainer.setAttribute("show","true")}else a.errors.CreateError("server-unreachable",
c.Error,a.PrimaryContent)}.bind(this,k);a.net.Request("http://isupportjolla.com/letters-api","POST",{Action:"get",LetterId:b},c)};b.HideLetter=function(){var b=a.PrimaryContent.querySelector("div[data-isupportjolla-error]");null!==b?a.PrimaryContent.removeChild(b):(b=a.letters.PublishedLetter.querySelector('div[data-isupportjolla-component="letter-metadata"]'),a.letters.PublishedLetter.removeChild(b),a.letters.PublishedLetterContent.innerHTML="",a.PrimaryContent.querySelector('div[data-isupportjolla-component="letters-list-items"]').removeAttribute("hide"),
a.letters.PublishedLetterContainer.removeAttribute("show"))}})(a.letters||(a.letters={}))})(isupportjolla||(isupportjolla={}));
(function(a){(function(b){b.IsTwitterBlockedMessage="Twitter widget being blocked by browser. Lemme guess, Ghostery?";b.Init=function(){a.twitter.GenerateForm();a.twitter.FormInput.addEventListener("input",a.twitter.TrackInput);a.twitter.IsTwitterBlocked=!("undefined"!==typeof twttr&&"undefined"!==typeof twttr.widgets);-1==window.location.toString().indexOf("sailfish")?a.twitter.GenerateTimeline():a.twitter.GenerateSailfishPhotoGrid()};b.ActivateLoadPrompt=function(a,b){var c=a.querySelector('div[data-isupportjolla-component="button"][data-is-for-twitter]');
if(null!==c){var e=function(a,b){a.setAttribute("hide","true");b()}.bind(this,c,b);c.removeAttribute("hide");c.addEventListener("click",e)}};b.CreateSailorFeedTimeline=function(){var b=a.Sidepane.querySelector('div[data-isupportjolla-component="sailor-feed-timeline"]');null!==b&&(a.twitter.IsTwitterBlocked?a.errors.CreateError("twttr",a.twitter.IsTwitterBlockedMessage,b):twttr.widgets.createTimeline("675772340106608640",b,{height:400,border:"#ffffff",chrome:"noheader,nofooter,noborders,transparent",
lang:a.lang.GetLanguage(),tweetLimit:10}))};b.CreateSailfishExperienceTimeline=function(){var b=document.querySelector('div[data-isupportjolla-component="sailfish-experience-timeline"]');null!==b&&(a.twitter.IsTwitterBlocked?a.errors.CreateError("twttr",a.twitter.IsTwitterBlockedMessage,b):twttr.widgets.createGridFromCollection("678194475089444864",b,{height:400,border:"#ffffff",chrome:"noheader,nofooter,noborders,transparent",lang:a.lang.GetLanguage(),tweetLimit:5,limit:5}))};b.GenerateForm=function(){a.twitter.Form=
document.querySelector('div[data-isupportjolla-component="tweet-form"]');a.twitter.FormInput=document.createElement("textarea");a.twitter.FormInput.setAttribute("placeholder","Input positive tweet with #ISupportJolla");a.twitter.FormInput.setAttribute("maxlength","140");a.twitter.FormInput.setAttribute("tabindex","1");a.twitter.FormButton=document.createElement("a");a.twitter.FormButton.setAttribute("target","_blank");a.twitter.FormButton.textContent="Tweet";a.twitter.FormButton.setAttribute("tabindex",
"2");a.twitter.Form.appendChild(a.twitter.FormInput);a.twitter.Form.appendChild(a.twitter.FormButton)};b.GenerateSailfishPhotoGrid=function(){var b=document.querySelector('div[data-isupportjolla-component="fullwidth-content"][data-isupportjolla-page="sailfish"]');600<a.GetPageWidth()?a.twitter.CreateSailfishExperienceTimeline():a.twitter.ActivateLoadPrompt(b,a.twitter.CreateSailfishExperienceTimeline)};b.GenerateTimeline=function(){600<a.GetPageWidth()?a.twitter.CreateSailorFeedTimeline():a.twitter.ActivateLoadPrompt(a.Sidepane,
a.twitter.CreateSailorFeedTimeline)};b.TrackInput=function(){if(-1!==a.twitter.FormInput.value.indexOf("#ISupportJolla")){var b=encodeURIComponent(a.twitter.FormInput.value),b="https://twitter.com/share?related=JoshStrobl"+encodeURIComponent(",")+"JollaHQ&text="+b;a.twitter.FormButton.setAttribute("href",b)}else a.twitter.FormButton.removeAttribute("href")}})(a.twitter||(a.twitter={}))})(isupportjolla||(isupportjolla={}));
(function(a){a.Init=function(b){a.PrimaryContent=document.querySelector('div[data-isupportjolla-component="primary-content"]');a.Sidepane=document.querySelector('div[data-isupportjolla-component="sidepane"]');"undefined"!==typeof b&&(a.Config=b,a.lang.PropagateLanguageBar());a.twitter.Init();-1!==window.location.toString().indexOf("letters")&&a.letters.Init()};a.GetPageWidth=function(){return document.body.getClientRects()[0].width}})(isupportjolla||(isupportjolla={}));

// @license-end